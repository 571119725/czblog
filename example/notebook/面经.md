> 面试经验
>
> 1. 所有问题都要想好了大致框架再回答
> 2. 回答时语速要均匀，可以慢但是不能快
> 3. 遇到很熟练的题目也不要着急回答，可以扮猪吃老虎，想一会再回答，尽量不要被看出来是背的

# 暑期实习

> offer：京东日常实习，腾讯HR，**蚂蚁支付平台**

## JD科技 日常实习 一面 24.12.05

无算法

### 相关知识

java基础

java集合

Jvm

mysql

Spring bean的并发

### 问题

Java concurrent包下有哪些类？

hashmap为什么存在线程并发问题？

JVM相关的操作？

mysql大数据量表的一个分页性能问题？

线程池执行任务的线程，如何设置超时后结束？

最有成就感的事情？

一句话评价自己？

## 字节支付业务内推一面 25.1.20

### java集合

1. hashmap在jdk1.7和1.8之间的区别

### Jvm

1. 四种引用类型？
2. jvm垃圾处理类型？

### 操作系统

1. 线程和进程的区别

### Mysql

1. 事务隔离等级
2. mysql的乐观锁和悲观锁
3. b+树和b树
4. MVCC的原理

### Redis

1. 持久化方式
2. 分布式锁
3. 分布式锁使用哪个命令实现的？

### 计算机网络

1. https的握手流程
2. 身份证书里面的内容

### 场景题目

1. 秒杀场景如何设计？从要解决什么问题？如何解决来考虑
2. 如何解决qps高的问题（如何提高系统容灾程度？）

算法题：

LRU缓存，做了一半讲思路

https://leetcode.cn/problems/lru-cache/description/?envType=study-plan-v2&envId=top-100-liked

## 腾讯HR业务内推一面 25.2.11

1. hashmap和concurrentHashmap的区别

2. Redis redlock是什么，有什么作用

   1.  Redis Redlock 简介

   2.  Redlock 是一种分布式锁的算法，专为Redis设计，旨在提供一个更可靠的分布式锁机制，适用于跨多个独立Redis实例（即不共享任何信息的Redis节点）的环境中。它由Antirez（Redis的创建者）提出，主要用于解决在分布式系统中需要确保对共享资源进行互斥访问的问题。

   3.  基本原理

   4.  Redlock算法通过在多个独立的Redis实例上获取锁来增加可靠性，而不是依赖于单一的Redis实例。具体步骤如下：

   5.  获取当前时间戳：以毫秒为单位。

   6.  依次向N个Redis实例请求加锁：

      1.   使用相同的随机值作为锁的标识符。

      1.   设置锁的有效期（即TTL），以防客户端崩溃导致死锁。

   7.  计算成功获取锁所需的时间：如果从大多数（超过半数）的Redis实例成功获取了锁，并且总耗时小于锁的有效期，则认为获取锁成功。

   8.  释放锁：向所有参与的Redis实例发送解锁命令。

   9.  作用

   10.  提高可靠性：相比于单点Redis实现的分布式锁，Redlock通过分布在多个独立的Redis实例上来减少因单个Redis实例故障而导致锁丢失的风险。

   11.  避免死锁：通过设置锁的有效期（TTL），即使客户端崩溃或网络分区发生，也能保证锁最终会被释放。

   12.  支持分布式环境下的互斥访问：确保在同一时刻只有一个客户端能够获得锁，从而安全地操作共享资源。

3. jvm内存模型介绍一下

4. docker部署相关了解过吗

5. 分布式集群介绍一下？CAP原理知道吗

6. java类加载器的作用

7. 内存淘汰的方法

8. threadlocal原理和内存泄漏问题？什么地方用到了threadlocal

9. 如何检验sql语句的执行效率

10. redis分布式锁如何实现的

11. 如何将长链接映射为短信里面的短链接并保证链接的唯一性

12. 如何保持请求的幂等性

    1.  请求的幂等性是什么？
    2.  请求的幂等性指的是无论某个操作被执行一次还是多次，其结果都是相同的。换句话说，对于幂等的操作，重复执行该操作不会产生不同的结果或副作用。在HTTP协议中，某些方法如`GET`, `PUT`, 和 `DELETE`被设计为幂等的，而像`POST`这样的方法则通常不是幂等的。
    3.  使用唯一标识符（Idempotency Key）
    4. 客户端生成唯一键：每次发出请求时，客户端生成一个唯一的标识符（通常称为`idempotency key`），并将这个键作为请求的一部分发送给服务器。
    5. 服务器端存储处理状态：服务器接收到带有`idempotency key`的请求后，首先检查是否已经处理过具有相同`idempotency key`的请求。如果是，则直接返回之前的结果而不是重新执行操作；如果不是，则执行操作，并将结果与该`idempotency key`关联起来存储。

13. 高并发秒杀系统如何设计

14. 如何保持数据库数据的高一致性（库存数量减为负数该如何预警和检测？）

算法题

[无重复字符的最长子串](https://leetcode.cn/problems/longest-substring-without-repeating-characters/)

https://leetcode.cn/problems/longest-substring-without-repeating-characters/?envType=study-plan-v2&envId=top-100-liked

## 腾讯HR业务内推二面 25.2.13

1. 数组和链表有什么区别？适合什么场景
2. 如何检验左右括号对的合法性？
3. 正则表达式用过吗？如何用正则表达式检验邮箱合法性？（感觉是前端的知识）
4. 家在哪？找工作对于地域的选择？
5. 简历中的项目的业务是什么？是真实项目吗？重点的技术难点在哪里？有什么收获？项目是几个人进行的
6. 项目中前后端的通信方式是什么？HTTP restful
7. redis在项目中的作用？这个项目中有用到redis缓存吗？
8. 有两根长度粗细不均匀的蜡烛，燃尽时间都是一小时，如何使用这俩来计时15分钟
   1.  把一根蜡烛从两头点燃，另一根从一头，两头的那根燃尽了是半小时，一头的蜡烛剩下的也是半小时，然后将剩下的部分从两头点燃，到燃尽就是15分钟
9. 介绍了业务：没有特别细致的小的业务方向，要求会的比较多，可能大多数工作要给外包来做，只需要负责技术选型和架构，以及一些数据处理

》〉》〉》〉教训：多将一些复杂的技巧放到真实的项目内容中，而不是自己学习的练手项目中，因为自己的项目面试官根本不问！！！！

## 腾讯HR业务内推HR谈薪 25.2.18

1. 入职时间

四月中旬

1. 薪资
2. 业务

s3人事系统开发

1. 转正

两月后可以申请转正答辩

（腾讯s2财经线转正25x15）

## 字节推荐算法业务一面 25.2.24

1. 项目中有用到redis吗？怎么用的？
2. redis如何保障数据的可用性的？
3. redis集群如何进行容灾的
4. 项目中如果用到高并发的问题，该如何解决？
   1. 系统架构设计
   2. 数据库优化
   3. 缓存机制
   4. 异步处理与消息队列
   5. 限流与降级
   6. 使用高性能框架和技术栈
   7. 分布式架构
5. 为何选择rabbitmq？与其他的消息队列相比有哪些优势？
6. 验证码业务流程？
7. 数据库MVCC原理？MVCC是针对单行数据的还是多行数据的还是针对表的
8. MVCC中用到锁了吗？什么锁？读锁还是写锁？
   1.  MVCC（多版本并发控制）本身并不直接使用锁来管理并发访问，而是通过维护数据的多个版本来减少事务间的冲突。然而，在MySQL的InnoDB存储引擎中，MVCC通常与锁定机制结合使用，以确保事务的隔离性和一致性。下面是关于MVCC如何与锁机制协作的详细说明：
   2. **排他锁（X锁，Exclusive Lock）**：当事务对某行进行修改（包括`INSERT`, `UPDATE`, `DELETE`操作）时，它会获取该行的排他锁。这意味着在同一时间，只有一个事务可以修改这行数据，并且其他事务不能对该行进行任何类型的访问（读或写），直到当前事务释放锁为止。
      - **更新操作**：在更新某行时，InnoDB首先会在该行上加一个排他锁，然后根据MVCC原理创建一个新的版本并标记旧版本为过期。
      - **删除操作**：类似地，删除一行实际上是将该行标记为删除状态，并加上排他锁，以便其他事务看不到这条记录。
   3.  读操作中的锁
   4. **共享锁（S锁，Shared Lock）**：在某些隔离级别下（如`REPEATABLE READ`和`READ COMMITTED`），对于涉及的行，InnoDB可能会使用共享锁来防止这些行被其他事务修改。共享锁允许多个事务同时读取同一行数据，但阻止任何事务获取排他锁来修改这些行。
   5. **普通读（Non-locking Read）**：在默认的`REPEATABLE READ`隔离级别下，普通的`SELECT`查询是基于MVCC的无锁读取，它们看到的是快照级别的数据，不加任何锁。
   6. **锁定读（Locking Read）**：如果使用了`SELECT ... FOR SHARE`（共享锁）或`SELECT ... FOR UPDATE`（排他锁），则会对查询到的行加相应的锁。前者允许其他事务也持有共享锁但阻止排他锁，后者则完全阻止其他事务对该行进行任何形式的访问直至锁释放。
9. 联合索引是什么？联合索引关注的原则是什么？什么情况下会失效？
10. 如果接受请求的服务器和处理数据的服务器在同一台机器上，如何提高处理数据的速度？零拷贝了解过吗？如何使用？如何实现零拷贝
11. 进程线程和协程
12. 进程通信方式中的共享内存？进程之间如何使用共享内存通信的？需要一个新的进程来进行协调吗？

算法题

反转链表

#### 答案

> ### 1. 项目中有用到Redis吗？怎么用的？
>
> 
>
> 根据提供的信息，项目中确实使用了Redis。例如，在用户管理模块中，通过Spring Cache结合Redis进行群组用户关系的缓存处理，以加快群组消息转发对象的获取速度，减轻数据库查询的压力。
>
> 
>
> ### 2. Redis如何保障数据的可用性的？
>
> 
>
> Redis通过多种机制保障数据的可用性：
>
> - **持久化**：支持RDB快照和AOF日志两种持久化方式。
> - **主从复制**：通过配置主从节点，实现数据的冗余备份。
> - **哨兵机制**：监控Redis实例的状态，自动进行故障转移。
> - **集群模式**：在集群模式下，数据被分片存储在多个节点上，增强了数据的可靠性和可扩展性。
>
> 
>
> ### 3. Redis集群如何进行容灾的？
>
> 
>
> Redis集群的容灾主要依赖于以下几个方面：
>
> - **自动故障转移**：当某个主节点发生故障时，哨兵或集群自身会自动将其中一个从节点升级为主节点，继续提供服务。
> - **数据分片**：数据分布在多个节点上，即使某些节点出现故障，其他节点仍然可以正常工作。
> - **高可用架构**：通过搭建主从结构，并设置合适的哨兵监控，确保系统能够快速响应并恢复。
>
> 
>
> ### 4. 项目中如果用到高并发的问题，该如何解决？
>
> 
>
> 针对高并发问题，可以采取以下措施：
>
> - **使用缓存**：如前面提到的Redis缓存策略，减少数据库压力。
> - **异步处理**：利用消息队列（如RabbitMQ）解耦业务逻辑，削峰填谷。
> - **优化数据库查询**：合理设计索引、采用读写分离等手段提高数据库性能。
> - **限流与降级**：在流量高峰时实施限流策略，必要时对非核心功能进行服务降级。
>
> 
>
> ### 5. 为何选择RabbitMQ？与其他的消息队列相比有哪些优势？
>
> 
>
> 选择RabbitMQ的原因包括其强大的消息路由能力、灵活的协议支持以及成熟的社区支持。相比于其他消息队列，RabbitMQ的优势在于：
>
> - **灵活性**：支持多种消息传递模式（点对点、发布/订阅等）。
> - **可靠性**：提供消息确认机制，保证消息不会丢失。
> - **易于使用**：API友好，文档详尽，便于集成。
>
> 
>
> ### 6. 验证码业务流程？
>
> 
>
> 验证码业务通常包含生成验证码、发送验证码（如短信或邮件）、验证用户输入的验证码三个步骤。具体流程可能涉及加密传输、过期时间控制、防止重复提交等安全措施。
>
> 
>
> ### 7. 数据库MVCC原理？
>
> 
>
> MVCC（多版本并发控制）是一种用于数据库管理系统中并发控制的方法。它允许事务查看特定时刻的数据状态，而不是锁定数据行，从而提高了并发度。MVCC适用于单行、多行乃至整个表的数据操作。
>
> 
>
> ### 8. MVCC中用到锁了吗？什么锁？
>
> 
>
> MVCC本身不直接使用传统意义上的锁来控制并发访问，而是通过版本号和快照隔离技术来避免冲突。但在某些情况下，为了维护数据一致性，仍可能需要加锁，主要是写锁。
>
> 
>
> ### 9. 联合索引是什么？
>
> 
>
> 联合索引是对多个列建立的索引，遵循最左前缀原则，即查询条件中必须包含索引的第一个字段才能有效使用该索引。失效情况包括未按照最左前缀顺序使用索引列等。
>
> 
>
> ### 10. 如果接受请求的服务器和处理数据的服务器在同一台机器上，如何提高处理数据的速度？
>
> 
>
> 可以通过零拷贝技术提高效率，比如Linux中的`sendfile()`系统调用，减少了内核空间与用户空间之间的数据复制次数。这特别适合文件传输类的应用场景。
>
> 
>
> ### 11. 进程线程和协程
>
> 
>
> - **进程**：操作系统资源分配的基本单位。
> - **线程**：程序执行的最小单位，是进程内的一个实体。
> - **协程**：一种轻量级的线程，由应用程序自行调度，切换开销小。
>
> 
>
> ### 12. 进程通信方式中的共享内存？
>
> 
>
> 共享内存允许不同进程直接访问同一块物理内存区域，无需经过内核空间的数据拷贝，从而大大提高效率。通常需要同步机制（如信号量）来协调多个进程对共享内存的访问，不一定需要新的进程来进行协调。
>
> 共享内存的分配和使用通常涉及到操作系统提供的机制，而不是需要另一个特定进程来专门负责这个过程。以下是共享内存的基本分配和使用流程：
>
> ##### 共享内存的分配与使用
>
> 1. 创建或打开共享内存段：
>    1. 进程通过系统调用（例如在Linux中可以使用`shmget()`函数）请求创建一个新的共享内存段或者打开一个已有的共享内存段。
>    2. 如果是创建新的共享内存段，需要指定其大小和其他属性；如果是打开已存在的，则需要知道该共享内存段的唯一标识符（通常是键值）。
> 2. 映射到进程地址空间：
>    1. 创建或打开共享内存段之后，进程需要将这块共享内存附加（attach）到自己的地址空间中，这一步通常通过`shmat()`函数完成（在Linux环境下）。附加后，共享内存就像普通内存一样可以被访问。
> 3. 同步机制：
>    1. 因为多个进程可能同时读写共享内存中的数据，所以需要某种形式的同步机制来避免竞态条件。常用的同步方法包括信号量、互斥锁等，这些可以帮助确保对共享资源的安全访问。
> 4. 分离和删除共享内存段：
>    1. 当不再需要访问共享内存时，进程可以通过`shmdt()`函数将其从自身的地址空间中分离。
>    2. 最终，当所有进程都完成了对共享内存段的操作，并且确定不再需要它时，可以通过`shmctl()`函数删除共享内存段。

## 字节推荐算法业务二面 25.2.25

1. TreeMap和HashMap的区别？TreeMap底层原理？项目中有用到过吗？（没记住）
2. HashMap是如何实现的？时间复杂度？
3. 手写HashMap
4. 伪代码HashMap扩容
5. HashMap如何避免并发冲突
6. 什么时间可以入职，入职时间太晚可能没什么优势

## 字节推荐算法业务HR面 25.2.27

1. 自我介绍
2. base选哪里？
3. 未来规划？继续做后端业务还是偏推荐系统架构
4. 对岗位有什么了解？
5. 入职时间最早可以什么时候？
6. 之前的面评为什么不好

## 字节推荐算法业务加面 25.3.7

1. 自我介绍

2. 装箱拆箱，以及integer.valueOf和new Integer是否相同

3. 定时任务为什么用quarts

4. java如何实现定时任务

   1. 使用 `java.util.Timer` 和 `java.util.TimerTask`

   2.  这是最基本也是最简单的实现定时任务的方法之一。

   3. ```Plain
      import java.util.Timer;
      import java.util.TimerTask;
      public class TimerExample {
          public static void main(String[] args) {
              TimerTask task = new TimerTask() {
                  @Override
                  public void run() {
                      System.out.println("执行定时任务");
                  }
              };
      
              // 创建一个Timer实例
              Timer timer = new Timer();
              // 安排指定的任务在延迟2秒后开始，之后每隔5秒重复执行一次
              timer.scheduleAtFixedRate(task, 2000, 5000);
          }
      }
      ```

   4.  注意：

   5. `Timer` 在遇到异常时会终止所有后续任务的执行。

   6. 不支持并发执行任务（即如果一个任务还在运行，下一个调度点到达时不会启动新的任务）。

5. 生成数据报告的业务逻辑

6. 项目是否实际投入使用

7. 为什么要使用rabbitmq进行消息的消费

8. 什么是包装类

9. 重写和重载？

10. 相同方法名，不同返回类型是否可行？为什么？原理？

11. 线程池了解多少？线程池底层实现的原理（源码）

12. final和static的作用和用法？

13. springioc和aop？在项目中是如何使用的

14. 线程池中的线程执行过程中出现异常怎么办？线程会怎么样？

处理办法

 在runnable或者callable中进行捕获或者在线程池的线程工厂里面创建线程并设置异常捕获和处理办法，如果是callable任务的话，还可以通过future对象进行异常捕获，对于`ThreadPoolExecutor`，可以通过重写`afterExecute`方法来添加额外的异常处理逻辑。这个方法会在每次任务执行完毕后调用，即使任务抛出了异常也能捕获到。

1. springboot和springcloud的区别？他们的通信方式有什么不同？了解哪些rpc框架
2. 算法题

单例实现

volatile的作用？是否能实现原子性

回文链表：On空间复杂度和O1空间复杂度的两种实现

## 阿里云安全保障研发中台 25.3.12

业务：为阿里云产品提供安全保障和风险监控

场景题：如何实现一个高并发队列？无锁队列

1. 项目的业务是什么？访问量有多少？token的作用？ThreadLocal的作用？
2. CSRF？DDos？Dos？是什么
3. TCP拥塞控制？
4. HTTPS连接过程？
5. volatile是什么？防止指令重排序？
6. 连接出现time_waiting的原因和处理办法？占用了系统哪些资源？
   1.  当系统中出现大量连接处于 `TIME_WAIT` 状态时，通常与TCP协议的工作机制有关。理解其原因及如何处理这些问题对于维护高性能和稳定的网络服务至关重要。
   2.  `TIME_WAIT`状态的原因
   3.  在TCP四次挥手过程中，最后一个ACK由主动关闭方发送并进入 `TIME_WAIT` 状态。该状态的主要目的是确保所有延迟的数据段都能被接收方正确处理，并允许足够的时间让网络中的重复数据包消失，从而避免新建立的相同端口连接接收到旧连接的数据包。默认情况下，这个状态会持续大约2倍的最大报文生存时间（MSL），通常是1-4分钟。
   4. **频繁短连接**：如果应用程序频繁地建立和关闭TCP连接，比如HTTP短连接模式下的Web服务器，这将导致大量的连接快速进入 `TIME_WAIT` 状态。
   5. **客户端或服务器未正确关闭连接**：有时由于程序错误或者网络问题，连接未能正常关闭，也会导致 `TIME_WAIT` 状态增加。
   6. **高并发环境**：在高并发环境下，即使单个连接保持较长时间，但总的连接数非常多，也可能积累大量的 `TIME_WAIT` 连接。
   7.  尽管 `TIME_WAIT` 状态的连接不再传输数据，它们仍然占用一些系统资源：
   8. **端口资源**：每个 `TIME_WAIT` 状态的连接都会暂时占用一个本地端口号，直到超时结束。这对于使用临时端口的应用来说尤其重要，因为这可能耗尽可用的端口号范围（默认为1024到65535）。
   9. **内存资源**：虽然每个 `TIME_WAIT` 状态的连接所占内存很小，但在大量存在的情况下，总体上仍会对系统内存造成一定压力。
   10. **CPU资源**：管理这些状态需要一定的CPU周期来进行定时检查和清理。
   11. **调整内核参数**：
       1. 修改 `/proc/sys/net/ipv4/tcp_tw_reuse` 为1，允许重用处于 `TIME_WAIT` 状态的socket用于新的TCP连接请求。
       2. 设置 `/proc/sys/net/ipv4/tcp_tw_recycle` 为1（注意：从Linux 4.12开始已被弃用，因为它可能导致NAT环境下的连接问题）。
       3. 减少 `TIME_WAIT` 超时时间，通过设置 `/proc/sys/net/ipv4/tcp_fin_timeout` 来降低默认的60秒等待时间。
   12. **优化应用层设计**：
       1. 使用长连接代替短连接，减少不必要的连接建立和断开操作。
       2. 实现连接池机制，复用已有的连接，减少新建连接的需求。
   13. **负载均衡**：
       1. 利用反向代理或负载均衡器来分散客户端请求，减少后端服务器直接面对的连接数。
   14. **调整客户端行为**：
       1. 如果可能的话，修改客户端的行为以减少不必要的连接关闭，例如通过批量处理请求或者延长连接空闲时间。
7. 如何解决哈希冲突？
8. 进程间通信方法？
9. http1.0和2.0的区别

算法题：给定一串数字，拼接出最大数字

## 蚂蚁数字支付事业群一面 25.3.13

基本都在问项目细节

mysql事务

节点更新之后如何保持数据一致性

算法题讲思路

限流器，60秒内的前n条请求返回true，后面的返回false

## 快手支付中台 25.3.19

（业务：处理用户余额，为上层服务提供数据并且对接微信和支付宝）

重点问buddy项目

项目的业务逻辑

websocket和http的区别？websocket底层实现与http有何不同

redis缓存的数据结构，使用不同的数据结构有什么优势劣势？

rabbmq选项？为什么这么选？了解其他的消息队列吗？有什么不同的地方

为什么要用lua脚本？如果锁失效了该如何处理？如何防止锁失效的情况下出现问题？

mongodb用来干嘛？与redis和mysql有什么异同？索引方面有什么不同之处

mysql的多种日志的用处？以及binlog和redolog的两阶段提交？

线程池的参数？核心线程数如何设置？如果有大量需要读取文件，每次用时3～4秒的任务需要处理，核心线程数该如何选择？

算法题目：连续字符的出现次数？滑动窗口法

## 饿了么营销中台 25.3.20

业务：处理饿了么支付的前中后的算价

消息队列选型？

项目中的难点？

OSS服务器的底层实现原理？

excel编辑组件？

redis数据结构？字符串的底层数据结构？哈希的底层数据结构？

文件上传和下载的原理？

长连接是如何保持的？

springcache和redis是两级缓存吗？

如果自己使用redis的话该如何配置？

redis 分布式锁的实现原理？

mysql的锁有哪些？

算法题：指定数组的全排列？

## 蚂蚁数字支付事业群二面 25.3.21

问buddy项目

基本都是rabbitmq相关的

mq选型

还问了研究方向的东西

还问了大模型部署相关的经历有没有

还问了自己有没有什么对于其他方向的研究或能力

自己的能力？自己的缺点？